
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="P: Modular and Safe Programming of Distributed Systems">
      
      
        <link rel="canonical" href="http://p-org.github.io/P/advanced/psym/usingPSym/">
      
      
        <meta name="author" content="Ankush Desai">
      
      <link rel="shortcut icon" href="../../../icon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.2">
    
    
      
        <title>usingPSym - P</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.19190aaf.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.24b84193.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="deep-orange">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#compiling-a-p-program-for-psym" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="http://p-org.github.io/P/" title="P" class="md-header-nav__button md-logo" aria-label="P">
      
  <img src="../../../icon.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            P
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              usingPSym
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/p-org/P" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    P on Github
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="http://p-org.github.io/P/" title="P" class="md-nav__button md-logo" aria-label="P">
      
  <img src="../../../icon.png" alt="logo">

    </a>
    P
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/p-org/P" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    P on Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../whatisP/" class="md-nav__link">
      What is P?
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Getting Started
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getstarted/install/" class="md-nav__link">
      Installing P
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getstarted/syntaxhighlight/" class="md-nav__link">
      Syntax Highlighting for P
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getstarted/usingP/" class="md-nav__link">
      Using P Compiler and Checker
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Tutorials
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutsoutline/" class="md-nav__link">
      Outline
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorial/clientserver/" class="md-nav__link">
      Client Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorial/twophasecommit/" class="md-nav__link">
      Two Phase Commit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorial/espressomachine/" class="md-nav__link">
      Espresso Machine
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorial/failuredetector/" class="md-nav__link">
      Failure Detector
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorial/common/" class="md-nav__link">
      Timer, Failure, and Shared Memory
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Advanced User Guide
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Advanced User Guide" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Advanced User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../psemantics/" class="md-nav__link">
      P Semantics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../importanceliveness/" class="md-nav__link">
      Importance of Liveness Specifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../structureOfPProgram/" class="md-nav__link">
      Structure of a P Program
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../PProject/" class="md-nav__link">
      P Project File
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../debuggingerror/" class="md-nav__link">
      Debugging Error Traces (counter examples)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Language Manual
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Language Manual" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        Language Manual
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../manualoutline/" class="md-nav__link">
      P Program (Outline)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../manual/datatypes/" class="md-nav__link">
      P DataTypes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../manual/events/" class="md-nav__link">
      P Events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../manual/statemachines/" class="md-nav__link">
      P State Machines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../manual/monitors/" class="md-nav__link">
      P Monitors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../manual/functions/" class="md-nav__link">
      P Functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../manual/expressions/" class="md-nav__link">
      P Expressions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../manual/statements/" class="md-nav__link">
      P Statements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../manual/modulesystem/" class="md-nav__link">
      P Module System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../manual/testcases/" class="md-nav__link">
      P Test cases
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../manual/foriegntypesfunctions/" class="md-nav__link">
      P Foreign Interface
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../casestudies/" class="md-nav__link">
      Case Studies
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../videos/" class="md-nav__link">
      Videos
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../publications/" class="md-nav__link">
      Publications
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Contributing to P
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Contributing to P" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        <span class="md-nav__icon md-icon"></span>
        Contributing to P
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getstarted/build/" class="md-nav__link">
      Building from Source
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#compiling-a-p-program-for-psym" class="md-nav__link">
    Compiling a P program for PSym
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#checking-a-p-program-with-psym" class="md-nav__link">
    Checking a P program with PSym
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coverage" class="md-nav__link">
    Coverage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cli-options" class="md-nav__link">
    CLI Options
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>usingPSym</h1>
                
                <div class="admonition check">
<p>Before moving forward, we assume that you have successfully <a href="../install/">installed PSym</a> <img alt="🤘" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f918.svg" title=":metal:" /> .</p>
</div>
<p>In this section, we provide an overview of the steps involved in compiling and checking a P program with PSym
using the <a href="../../../tutorial/clientserver/">client server</a> example in Tutorials.</p>
<details class="info"><summary>Get the Client Server Example Locally</summary><p>We will use the <a href="https://github.com/p-org/P/tree/master/Tutorial/1_ClientServer">ClientServer</a> example from Tutorial folder in P repository to describe the process of compiling and checking a P program with PSym. Please clone the P repo and navigate to the ClientServer example in Tutorial.</p>
<p>Clone P Repo locally:
<div class="highlight"><pre><span></span><code>git clone https://github.com/p-org/P.git
</code></pre></div>
Navigate to the ClientServer examples folder:
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> &lt;P cloned folder&gt;/Tutorial/1_ClientServer
</code></pre></div></p>
</details>
<h3 id="compiling-a-p-program-for-psym">Compiling a P program for PSym</h3>
<p>Simply pass the commandline argument <code>-generate:PSym</code> when running the P compiler <code>pc</code>.</p>
<details class="info"><summary>Alternative way: Set <code>&lt;Target&gt;</code> as <code>PSym</code> in <code>*.pproj</code></summary><p>Set the <code>&lt;Target&gt;</code> field as <code>PSym</code> in the P project file (<code>*.pproj</code>)</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="c">&lt;!-- P Project file for the Client Server example --&gt;</span>
<span class="nt">&lt;Project&gt;</span>
<span class="nt">&lt;ProjectName&gt;</span>ClientServer<span class="nt">&lt;/ProjectName&gt;</span>
<span class="nt">&lt;InputFiles&gt;</span>
   <span class="nt">&lt;PFile&gt;</span>./PSrc/<span class="nt">&lt;/PFile&gt;</span>
   <span class="nt">&lt;PFile&gt;</span>./PSpec/<span class="nt">&lt;/PFile&gt;</span>
   <span class="nt">&lt;PFile&gt;</span>./PTst/<span class="nt">&lt;/PFile&gt;</span>
<span class="nt">&lt;/InputFiles&gt;</span>
<span class="nt">&lt;OutputDir&gt;</span>./PGenerated/<span class="nt">&lt;/OutputDir&gt;</span>
<span class="hll"><span class="nt">&lt;Target&gt;</span>PSym<span class="nt">&lt;/Target&gt;</span>
</span><span class="nt">&lt;/Project&gt;</span>
</code></pre></div>
</details>
<div class="admonition tip">
<p class="admonition-title">Recommendation</p>
<p>We recommend using the P project file <code>*.pproj</code> along with passing <code>-generate:PSym</code> as commandline argument to the compiler 
to compile a P program for PSym.
Commandline argument <code>-generate:XXX</code> takes priority over <code>&lt;Target&gt;YYY&lt;/Target&gt;</code> in <code>*.pproj</code> file.</p>
</div>
<div class="tabbed-set" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">Compiling the ClientServer project for PSym</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code>pc -proj:ClientServer.pproj -generate:PSym
</code></pre></div>
<details class="info"><summary>Expected Output</summary><div class="highlight"><pre><span></span><code>$ pc -proj:ClientServer.pproj -generate:PSym
----------------------------------------
==== Loading project file: ClientServer.pproj
....... includes p file: P/Tutorial/1_ClientServer/PSrc/Server.p
....... includes p file: P/Tutorial/1_ClientServer/PSrc/Client.p
....... includes p file: P/Tutorial/1_ClientServer/PSrc/AbstractBankServer.p
....... includes p file: P/Tutorial/1_ClientServer/PSrc/ClientServerModules.p
....... includes p file: P/Tutorial/1_ClientServer/PSpec/BankBalanceCorrect.p
....... includes p file: P/Tutorial/1_ClientServer/PTst/TestDriver.p
....... includes p file: P/Tutorial/1_ClientServer/PTst/Testscript.p
----------------------------------------
----------------------------------------
Parsing ...
Type checking ...
Code generation ...
Generated clientserver.java.
----------------------------------------
Compiling ClientServer...
  ClientServer -&gt; target/ClientServer-jar-with-dependencies.jar
Build succeeded.
----------------------------------------
</code></pre></div>
</details>
<h3 id="checking-a-p-program-with-psym">Checking a P program with PSym</h3>
<p>Compiling the ClientServer program generates a <code>ClientServer-jar-with-dependencies.jar</code>. This <code>.jar</code> is
the symbolically-instrumented intermediate representation of the P program in Java, along with a packaged PSym runtime.
Running this <code>.jar</code> file executes PSym to systematically explore behaviors of the program for the specified test case.</p>
<p>The <code>.jar</code> is present in the <code>target/</code> folder, also printed in the compiler output:
<code>ClientServer -&gt; target/ClientServer-jar-with-dependencies.jar</code></p>
<p>You can get the list of test cases defined in the P program by running the generated <code>.jar</code>:</p>
<div class="highlight"><pre><span></span><code>java -jar target/ClientServer-jar-with-dependencies.jar
</code></pre></div>
<details class="info"><summary>Expected Output</summary><div class="highlight"><pre><span></span><code>java -jar target/ClientServer-jar-with-dependencies.jar

Picked up JAVA_TOOL_OPTIONS: -Dlog4j2.formatMsgNoLookups=true
WARNING: sun.reflect.Reflection.getCallerClass is not supported. This will impact performance.
Reflections took 100 ms to scan 1 urls, producing 38 keys and 168 values
Loading:: /Volumes/workplace/psym/src/PSymTest/exp/Examples/Tutorial/1_ClientServer/target/ClientServer-jar-with-dependencies.jar
Setting solver engine to BDD + Bdd
Reflections took 63 ms to scan 1 urls, producing 38 keys and 168 values
<span class="hll">Provide /method or -m flag to qualify the test method name you wish to use.
</span><span class="hll">Possible options are::
</span><span class="hll">tcSingleClient
</span><span class="hll">tcMultipleClients
</span></code></pre></div>
</details>
<p>There are three test cases defined in the ClientServer P project, and you can specify which
test case to run by using the <code>-m</code> or <code>--method</code> parameter along with, say, a <code>--time-limit &lt;seconds&gt;</code> parameter to
specify a time limit for the run in seconds.
By default, PSym explores as many schedules as it can within a time limit of 60 seconds.</p>
<p>So to run the <code>tcSingleClient</code> test case for 10 seconds, we can use the following command:</p>
<div class="highlight"><pre><span></span><code>java -jar target/ClientServer-jar-with-dependencies.jar <span class="se">\</span>
    -m tcSingleClient <span class="se">\</span>
    --time-limit <span class="m">10</span>
</code></pre></div>
<details class="info"><summary>Expected Output</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>Picked up JAVA_TOOL_OPTIONS: -Dlog4j2.formatMsgNoLookups=true
WARNING: sun.reflect.Reflection.getCallerClass is not supported. This will impact performance.
Reflections took 93 ms to scan 1 urls, producing 38 keys and 172 values
. Checking /Users/goelaman/work/ws/version/github/P/Tutorial/1_ClientServer/target/ClientServer-jar-with-dependencies.jar
Reflections took 45 ms to scan 1 urls, producing 38 keys and 172 values
... Method tcSingleClient
... Project clientserver is using &#39;default&#39; strategy (seed:0)
--------------------
<span class="hll">  Time       Memory        Coverage      Iteration         Remaining          Depth      States   
</span><span class="hll">00:00:10     0.2 GB     1.4246418994 %      140        1820 (100 % data)        1         8043
</span>--------------------
<span class="hll">Estimated Coverage:: 1.4246418994 %
</span><span class="hll">Distinct States Explored:: 8043
</span>--------------------
<span class="hll">Explored 140 single executions
</span><span class="hll">Took 10 seconds and 0.2 GB
</span><span class="hll">Result: partially safe with 1820 backtracks remaining
</span>--------------------
java.lang.Exception: TIMEOUT
at psym.commandline.EntryPoint.process(EntryPoint.java:97)
at psym.commandline.EntryPoint.run(EntryPoint.java:138)
at psym.commandline.PSym.main(PSym.java:73)
</code></pre></div>
</td></tr></table>
<p>Here, PSym explores 140 schedules/iterations, checking 8043 distinct states, and achieving an estimated coverage of ~ 1.4 %.</p>
<p>Check file <code>output/coverage-clientserver.log</code> for a detailed Coverage Report.</p>
<p>Check file <code>output/stats-clientserver.log</code> for a detailed Statistics Report.</p>
</details>
<h3 id="coverage">Coverage</h3>
<p>At the end of a run, PSym reports a coverage metric as an estimated percentage of the execution tree that is explored during
the run. Assuming a uniform probability for each scheduling/data choice, this metric reports the probability of a 
randomly-sampled schedule to be bug free.</p>
<details class="info"><summary>Continuous Feedback</summary><p>During the run, PSym prints useful metrics that summarizes the current status of the run.</p>
<p>For example, for the ClientServer run above, PSym prints:</p>
<div class="highlight"><pre><span></span><code>  Time       Memory        Coverage      Iteration         Remaining          Depth      States   
00:00:10     0.2 GB     1.4246418994 %      140        1820 (100 % data)        1         8043
</code></pre></div>
<p>that summarizes:</p>
<table>
<thead>
<tr>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Time</td>
<td>Elapsed runtime in <code>hh:mm:ss</code> format</td>
</tr>
<tr>
<td>Memory</td>
<td>Memory usage in gigabytes</td>
</tr>
<tr>
<td>Coverage</td>
<td>Estimated Coverage</td>
</tr>
<tr>
<td>Iteration</td>
<td>Iteration/schedule number</td>
</tr>
<tr>
<td>Remaining</td>
<td>Number of unexplored backtracks/choices remaining (as well as % of data choices)</td>
</tr>
<tr>
<td>Depth</td>
<td>Current depth of the exploration</td>
</tr>
<tr>
<td>States</td>
<td>Number of distinct states explored</td>
</tr>
</tbody>
</table>
</details>
<div class="admonition danger">
<p class="admonition-title">[Important] Is the coverage reported exactly measures the % of state-space covered?</p>
<p>Sadly, No <img alt="😔" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f614.svg" title=":pensive:" />!</p>
<p>PSym's coverage metric is <strong>not</strong> a perfect state-space coverage metric. 
This metric gives more weightage to shorter schedules, or more precisely, schedules with fewer schedule/data 
choices at shallower search depths.
Therefore, a PSym run can quickly reach a high estimated coverage (&gt; 99 %) due to exploring shorter schedules 
first, after which gaining the remaining left-over percentage can become increasingly (and exponentially) difficult.</p>
<p>Our recommendation is to target achieving coverage up to 11 nines, i.e., 99.999999999 % to be sufficiently confident
of the absence of bug.
Additionally, check PSym's Coverage Report (<code>output/coverage-*.log</code>) to understand the state-space covered 
during the run, as well as the number of distinct states explored.</p>
</div>
<p>At the end of a run, PSym also prints a coverage report in <code>output/coverage-*.log</code> that tabulates, for each 
exploration step/depth, the number of schedule/data choices explored during the run, along with the number of 
choices remaining as unexplored backtracks.
For example, coverage report corresponding to the previous ClientServer run can be found in <code>output/coverage-clientserver.log</code></p>
<details class="example"><summary>Example</summary><p>Here is a snippet of the ClientServer coverage report: <code>output/coverage-clientserver.log</code></p>
<div class="highlight"><pre><span></span><code>-----------------
Coverage Report::
-----------------
Covered choices:    8239 scheduling,  1962 data
Remaining choices:     0 scheduling, 30292 data
-------------------------------------
Depth   Covered       Remaining
      sch    data     sch    data
-------------------------------------
 0            100                 
 1    100                         
 2    100     134            5806
 3    135                         
 4    134                         
 5    134                         
 6    134                         
 7    134      50            1162
 8    134      77            2659
 9    127                         
10    127                         
11    127      36             559
12    127      48            1045
13    124      36            1149
14    120                         
15    120      23             296
16    120      36             621
17    114      34             766
18    111      18             468
19    111      19             203
20    112      24             374
21    109      31             582
22    106      25             494
23    106      20             250
24    104      19             256
25    102      22             326
26     98      26             365
27     97      23             319
28     96      19             222
29     95      20             268
30     95      23             298
31     93      23             279
32     91      19             233
33     91      20             243
34     89      18             232
35     88      22             263
36     85      17             181
37     83      15             176
38     79      16             198
39     76      19             221
40     73      20             199
41     73      15             176
42     71      10             123
43     70      20             225
44     68      20             208
45     68      16             187
46     66      10             123
47     66      17             190
48     66      18             187
49     64      16             186
50     62      10             114
            .
            .
            .
</code></pre></div>
</details>
<details class="tip"><summary>Improving Coverage for ClientServer</summary><p>Looks like the ClientServer example is quite data heavy, since there are lots of unexplored data choices at different steps 
(check the rightmost column of <code>output/coverage-clientserver.log</code>).
A good idea is to reduce the amount of data non-determinism by reducing the number of choices in the 
<code>choose(*)</code> expressions, such as the number of data choices in setting the initial bank balances in expression
<code>choose(100)</code> <a href="https://github.com/p-org/P/blob/master/Tutorial/1_ClientServer/PTst/TestDriver.p#L30">here</a>.</p>
</details>
<details class="info"><summary>Remaining choices in Coverage Report</summary><p>Note that the coverage report can be incomplete, since it tabulates the remaining choices as of by the end of a run.
Each remaining choice, say at a step N, when explored by PSym can discover many more choices at steps &gt;= N+1.</p>
</details>
<h3 id="cli-options">CLI Options</h3>
<p>Here is a list of frequently-used commandline options that can be passed to the <code>.jar</code>:</p>
<table>
<thead>
<tr>
<th>CLI Option</th>
<th>Description</th>
<th align="center">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--method &lt;string&gt;</code></td>
<td>Name of the test method to execute</td>
<td align="center"><code>auto</code></td>
</tr>
<tr>
<td><code>--time-limit &lt;sec&gt;</code></td>
<td>Time limit in seconds (use 0 for no limit)</td>
<td align="center"><code>60</code></td>
</tr>
<tr>
<td><code>--memory-limit &lt;MB&gt;</code></td>
<td>Memory limit in megabytes (use 0 for no limit)</td>
<td align="center"><code>auto</code></td>
</tr>
<tr>
<td><code>--iterations &lt;int&gt;</code></td>
<td>Number of schedules/executions to explore (use 0 for no limit)</td>
<td align="center"><code>0</code></td>
</tr>
<tr>
<td><code>--max-steps &lt;int&gt;</code></td>
<td>Max scheduling steps to be explored per schedule</td>
<td align="center"><code>1000</code></td>
</tr>
<tr>
<td><code>--seed &lt;int&gt;</code></td>
<td>Random seed to use for the exploration</td>
<td align="center"><code>0</code></td>
</tr>
<tr>
<td><code>--verbose &lt;int&gt;</code></td>
<td>Level of verbosity in the log output</td>
<td align="center"><code>0</code></td>
</tr>
<tr>
<td><code>--mode &lt;string&gt;</code></td>
<td>Preconfigured exploration mode to use (<code>default</code>, <code>bmc</code>, <code>fuzz</code>)</td>
<td align="center"><code>default</code></td>
</tr>
</tbody>
</table>
<p>For a complete list of options, pass the argument <code>--help</code>.</p>
<details class="tip"><summary>Exploration Techniques</summary><p>PSym implements a collection of configurable techniques summarized as follows:</p>
<table>
<thead>
<tr>
<th>Technique</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Search Strategy</td>
<td>Configure the order in which search is performed: <code>astar</code>, <code>random</code>, <code>dfs</code>, <code>learn</code></td>
</tr>
<tr>
<td>Choice Selection</td>
<td>Configure how a scheduling or data choice is selected: <code>random</code>, <code>learn</code></td>
</tr>
<tr>
<td>Never Repeat States</td>
<td>Track distinct states to avoid state revisits</td>
</tr>
<tr>
<td>Stateful Backtracking</td>
<td>Backtrack directly without replay</td>
</tr>
<tr>
<td>BMC</td>
<td>Run PSym as a bounded model checker</td>
</tr>
</tbody>
</table>
</details>
<div class="admonition info">
<p class="admonition-title">Preconfigured Modes</p>
<p>For ease of usage, PSym provides a set of preconfigured exploration modes as follows:</p>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>default</code></td>
<td>Explore single execution at a time <br/> Search Strategy = <code>astar</code> <br/> Choice Selection = <code>random</code> <br/> Never Repeat States = <code>ON</code> <br/> Stateful Backtracking = <code>ON</code> <br/> BMC = <code>OFF</code></td>
</tr>
<tr>
<td><code>bmc</code></td>
<td>Explore all executions together symbolically as a bounded model checker <br/> Search Strategy = <code>N/A</code> <br/> Choice Selection = <code>N/A</code> <br/> Never Repeat States = <code>OFF</code> <br/> Stateful Backtracking = <code>N/A</code> <br/> BMC = <code>ON</code></td>
</tr>
<tr>
<td><code>fuzz</code></td>
<td>Explore like a random fuzzer (but never repeat an execution!) <br/> Search Strategy = <code>random</code> <br/> Choice Selection = <code>random</code> <br/> Never Repeat States = <code>OFF</code> <br/> Stateful Backtracking = <code>OFF</code> <br/> BMC = <code>OFF</code></td>
</tr>
<tr>
<td><code>dfs</code></td>
<td>Explore single executions at a time in depth-first manner <br/> Search Strategy = <code>dfs</code> <br/> Choice Selection = <code>random</code> <br/> Never Repeat States = <code>ON</code> <br/> Stateful Backtracking = <code>ON</code> <br/> BMC = <code>OFF</code></td>
</tr>
<tr>
<td><code>learn</code></td>
<td>Explore single execution at a time with learning <br/> Search Strategy = <code>learn</code> <br/> Choice Selection = <code>learn</code> <br/> Never Repeat States = <code>ON</code> <br/> Stateful Backtracking = <code>ON</code> <br/> BMC = <code>OFF</code></td>
</tr>
</tbody>
</table>
<p>Pass the CLI argument <code>--mode &lt;option&gt;</code> to set the exploration mode.</p>
</div>
<p>You are now a pro <img alt="🥁" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f941.svg" title=":drum:" />! Give PSym a try on your P model and shared your feedback with us.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2023 P Developers
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
      <a href="https://twitter.com/_planguage" target="_blank" rel="noopener" title="P on Twitter" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
      <a href="mailto:ankushdesai@gmail.com" target="_blank" rel="noopener" title="Contact P Team" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/vendor.7e0ee788.min.js"></script>
      <script src="../../../assets/javascripts/bundle.c1ccee15.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../../..",
          features: ['navigation.instant', 'navigation.indexes', 'navigation.expand', 'navigation.top', 'toc.integrate', 'search.suggest', 'search.highlight'],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>